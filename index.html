<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CEFS Manlleu ¬∑ R√†dio en directe</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b0f14;
      --glass:#101722cc;
      --stroke:linear-gradient(135deg,#f7b500, #d21f3c);
      --text:#eef2f5;
      --muted:#9fb0c3;
      --ok:#2ad37a;
      --warn:#ffb703;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      color:var(--text); background: radial-gradient(1200px 800px at 20% -10%, #16212e 0%, transparent 60%),
                          radial-gradient(1000px 700px at 120% 120%, #1c1326 0%, transparent 60%),
                          var(--bg);
      display:grid; place-items:center; padding:22px;
    }
    .card{
      width:min(920px,95vw); position:relative;
      padding:28px 28px 24px; border-radius:24px;
      background: backdrop-filter: blur(10px);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      box-shadow: 0 20px 50px rgba(0,0,0,.45);
    }
    .card::before{
      content:""; position:absolute; inset:0; padding:2px; border-radius:24px;
      background: var(--stroke); -webkit-mask:
        linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite: xor; mask-composite: exclude;
      pointer-events:none;
    }
    .row{display:flex; gap:18px; align-items:center; flex-wrap:wrap}
    .logo{width:96px; height:96px; border-radius:18px; overflow:hidden; flex:0 0 auto;
      background:#111; display:grid; place-items:center}
    .logo img{width:100%; height:100%; object-fit:cover}
    h1{margin:0; font-size:clamp(26px,5vw,40px); line-height:1.05; font-weight:800; letter-spacing:.3px}
    .tag{display:flex; align-items:center; gap:10px; color:#ffdede; font-weight:600; margin-top:6px}
    .dot{width:12px; height:12px; border-radius:999px; background:var(--ok);
      box-shadow:0 0 12px 2px var(--ok)}
    .now{display:flex; align-items:center; gap:12px; margin:18px 0 6px; color:var(--muted)}
    .song{font-size:clamp(16px,3.4vw,20px); color:#fff; white-space:nowrap; overflow:hidden}
    .song span{display:inline-block; padding-left:100%; animation:marq 15s linear infinite}
    @keyframes marq{to{transform:translateX(-100%)}}
    .player{display:flex; align-items:center; gap:14px; margin-top:8px}
    .btn{
      border:0; border-radius:14px; padding:12px 16px; font-weight:700; cursor:pointer;
      background:#ffffff14; color:#fff;
    }
    .btn:hover{background:#ffffff22}
    audio{width:100%; accent-color:#f7b500}
    footer{margin-top:18px; color:var(--muted); font-size:14px}
    .tiny{font-size:12px; opacity:.8}
  </style>
</head>
<body>
  <div class="card">
    <div class="row">
      <div class="logo">
        <!-- üîÅ CANVIA A LA URL REAL DEL LOGO -->
        <img src="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" alt="CEFS Manlleu">
      </div>
      <div>
        <h1>CEFS Manlleu</h1>
        <div class="tag"><span class="dot"></span> Emissi√≥ en directe</div>
      </div>
    </div>

    <div class="now">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
        <path d="M3 9v6h4l5 5V4L7 9H3zM16 12c0-1.77-1.02-3.29-2.5-4.03v8.06A4.495 4.495 0 0 0 16 12zm1.5 0c0 2.48-1.51 4.6-3.67 5.46v1.74C17.91 18.77 20 15.64 20 12s-2.09-6.77-5.17-7.2v1.74C16.99 7.4 18.5 9.52 18.5 12z"/>
      </svg>
      <div id="nowTitle" class="song"><span>Carregant‚Ä¶</span></div>
    </div>

    <div class="player">
      <audio id="player" controls preload="none">
        <source src="https://sonic2.sistemahost.es:8120/stream" type="audio/mpeg">
      </audio>
    </div>

    <footer>
      üíõ‚ù§Ô∏è Som-hi Manlleu! ¬∑ <span class="tiny">emissi√≥ oficial del CEFS Manlleu</span>
    </footer>
  </div>

  <script>
    // Llegeix el t√≠tol actual de l‚ÄôIcecast
    async function updateSong(){
      const el = document.getElementById('nowTitle');
      try{
        const res = await fetch('https://sonic2.sistemahost.es:8120/status-json.xsl', {cache:'no-store'});
        const data = await res.json();
        const src = data?.icestats?.source;
        const title = (Array.isArray(src)?src[0]:src)?.title || 'En directe';
        // si √©s molt llarg, fem marquee
        const safe = (title || '').replace(/</g,'&lt;').replace(/>/g,'&gt;');
        el.innerHTML = '<span>'+safe+'</span>';
        // si √©s curt, parem l‚Äôanimaci√≥
        const span = el.querySelector('span');
        if(safe.length < 38){ span.style.animation = 'none'; span.style.paddingLeft = '0'; }
      }catch(e){
        el.innerHTML = '<span>‚Äî</span>';
      }
    }
    updateSong();
    setInterval(updateSong, 10000);
  </script>
</body>
</html>
